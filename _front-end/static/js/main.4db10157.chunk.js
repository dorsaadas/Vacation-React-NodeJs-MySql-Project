(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{139:function(e,t,a){e.exports=a(321)},144:function(e,t,a){},145:function(e,t,a){},163:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},202:function(e,t){},205:function(e,t,a){},227:function(e,t,a){},228:function(e,t,a){},321:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(27),c=a.n(i);a(144),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(8),s=a(15),l=a(19),u=a(18),m=(a(145),a(16)),p=a(11),g=a(6),d=a.n(g),h=a(14),v=a(7),E=function e(t,a,n,r,i){Object(o.a)(this,e),this.username=t,this.password=a,this.firstName=n,this.isAdmin=r,this.userId=i},b=a(17),f=a.n(b),w=(a(163),a(52)),k=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"_initialize",value:function(){e.serverUrl="https://dor-saada-vacation-project.herokuapp.com"}}]),e}();k.serverUrl=void 0,k._initialize();var S,V=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).cookie=new w.a,n.componentDidMount=function(){sessionStorage.getItem("isAdmin")&&sessionStorage.getItem("isAdmin").includes("1")&&n.props.history.push("/admin"),sessionStorage.getItem("isAdmin")?sessionStorage.getItem("isAdmin").includes("0")&&n.props.history.push("/user-vacations"):sessionStorage.clear()},n.userNameChange=function(e){var t=e.target.value,a=Object(v.a)({},n.state.login);a.username=t,n.setState({login:a})},n.PasswordChange=function(e){var t=e.target.value,a=Object(v.a)({},n.state.login);a.password=t,n.setState({login:a})},n.sendInfo=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=f.a.create({baseURL:"".concat(k.serverUrl),headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),e.next=4,t.post("/api/auth/login",n.state.login).then((function(e){sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("isAdmin",JSON.stringify(e.data.user.isAdmin)),sessionStorage.setItem("firstName",JSON.stringify(e.data.user.firstName)),sessionStorage.setItem("id",e.data.user.userId),1!==e.data.user.isAdmin?n.props.history.push("/user-vacations"):n.props.history.push("/admin")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert("Wrong Information");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),n.state={login:new E("","")},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"loginPage"},r.a.createElement("h3",null," Log In / Register"),r.a.createElement("input",{type:"text",placeholder:"User Name ..",onChange:this.userNameChange,value:this.state.login.username}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"Password ..",onChange:this.PasswordChange,value:this.state.login.password}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.sendInfo}," Login "),r.a.createElement("br",null),r.a.createElement("h4",null," Don't Have An Account? "),r.a.createElement(m.b,{to:"/register"},"Register"))}}]),a}(n.Component),O=(a(168),function e(t,a,n,r){Object(o.a)(this,e),this.firstName=t,this.lastName=a,this.username=n,this.password=r}),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).firstNameChange=function(e){var t=e.target.value,a=Object(v.a)({},n.state.register);a.firstName=t,n.setState({register:a})},n.lastNameChange=function(e){var t=e.target.value,a=Object(v.a)({},n.state.register);a.lastName=t,n.setState({register:a})},n.userNameChange=function(e){var t=e.target.value,a=Object(v.a)({},n.state.register);a.username=t,n.setState({register:a})},n.passwordChange=function(e){var t=e.target.value,a=Object(v.a)({},n.state.register);a.password=t,n.setState({register:a})},n.registration=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.register.firstName){e.next=3;break}return alert("Missing First Name"),e.abrupt("return");case 3:if(n.state.register.lastName){e.next=6;break}return alert("Missing Last Name"),e.abrupt("return");case 6:if(n.state.register.username){e.next=9;break}return alert("Missing User Name"),e.abrupt("return");case 9:if(n.state.register.password){e.next=12;break}return alert("Missing Password"),e.abrupt("return");case 12:return e.next=14,f.a.post("http://localhost:3000/api/auth/register",n.state.register).then((function(e){sessionStorage.setItem("token",e.data.token)})).catch((function(e){return console.log(e)}));case 14:return n.props.history.push("/login"),e.abrupt("return");case 16:case"end":return e.stop()}}),e)}))),n.state={register:new O("","","","")},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"register"},r.a.createElement("br",null),r.a.createElement("h4",null,"Please Fill All The Information Below:"),r.a.createElement("input",{type:"text",placeholder:"First Name ..",value:this.state.register.firstName,onChange:this.firstNameChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"text",placeholder:"Last Name ..",value:this.state.register.lastName,onChange:this.lastNameChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"text",placeholder:"UserName ..",value:this.state.register.username,onChange:this.userNameChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"Password ..",value:this.state.register.password,onChange:this.passwordChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.registration}," Register "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(m.b,{to:"/login"}," Already Have An Account?"))}}]),a}(n.Component),j=(a(169),a(131));!function(e){e[e.GetAllVacations=0]="GetAllVacations",e[e.AddNewVacation=1]="AddNewVacation",e[e.DeleteVacation=2]="DeleteVacation"}(S||(S={}));var x=Object(j.a)((function(e,t){var a=Object(v.a)({},e);switch(t.type){case S.GetAllVacations:a.vacations=t.payload;break;case S.DeleteVacation:a.vacations.splice(t.payload,1);break;case S.AddNewVacation:a.vacations.push(t.payload)}return a}),new function e(){Object(o.a)(this,e),this.vacations=void 0,this.login=void 0,this.login=new E,this.vacations=[]}),D=function e(t,a){Object(o.a)(this,e),this.userId=t,this.vacationId=a},N=a(133),C=a.n(N),I=a(50),A=a.n(I),F=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).unsubscribeStore=void 0,n.socket=A.a.connect("".concat(k.serverUrl)),n.clearCookies=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.socket.disconnect(),sessionStorage.clear();case 2:case"end":return e.stop()}}),e)}))),n.componentDidMount=Object(h.a)(d.a.mark((function e(){var t,a,r,i,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.socket.on("we-got-a-change-from-server",(function(e){n.setState({vacations:e})})),!sessionStorage.getItem("isAdmin")){e.next=5;break}sessionStorage.getItem("isAdmin").includes("1")||n.props.history.push("/user-vacations"),e.next=7;break;case 5:return n.props.history.push("/login"),e.abrupt("return");case 7:if(t=sessionStorage.getItem("firstName"),a=t.split('"')[1],n.setState({firstName:a}),n.unsubscribeStore=x.subscribe((function(){var e=x.getState().vacations;n.setState({vacations:e})})),e.prev=11,!(x.getState().vacations.length<=0)){e.next=20;break}return r=f.a.create({baseURL:"".concat(k.serverUrl),headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),e.next=16,r.get("/api/vacations/all");case 16:i=e.sent,c=i.data,o={type:S.GetAllVacations,payload:c},x.dispatch(o);case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(11),n.props.history.push("/login"),console.log("Error: "+e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[11,22]])}))),n.newFollow=function(){var e=Object(h.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=Object(v.a)({},n.state.followers)).userId=JSON.parse(sessionStorage.getItem("id")),a.vacationId=t,r=f.a.create({baseURL:"".concat(k.serverUrl),headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),e.next=7,r.post("/api/vacations/new-follower",a);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error: "+e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),n.disLike=function(){var e=Object(h.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=Object(v.a)({},n.state.followers)).userId=JSON.parse(sessionStorage.getItem("id")),a.vacationId=t,r=f.a.create({baseURL:"".concat(k.serverUrl),headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),e.next=7,r.post("/api/vacations/remove-follower",a);case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),console.log("Error: "+e.t0),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),n.state={vacations:x.getState().vacations,followers:new D,firstName:"",follow:!1,allFollowers:new D},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"userVacations"},r.a.createElement("h1",null,"Follow Your Favorite Vacation"),r.a.createElement("div",{className:"user"},r.a.createElement("h4",null,"Welcome: ",this.state.firstName),r.a.createElement(m.b,{to:"/login",onClick:this.clearCookies},"Logout")),this.state.vacations.map((function(t){return r.a.createElement("div",{className:"vacations",key:t.vacationId},r.a.createElement("img",{src:"/images/"+t.imageName,alt:"img"}),r.a.createElement("hr",null),r.a.createElement("h4",null," ",r.a.createElement("strong",null,"Description:"),"  ",r.a.createElement("br",null),r.a.createElement("div",{className:"description"},t.description)),r.a.createElement("h4",null,r.a.createElement("strong",null,"Vacation Place:")," ",r.a.createElement("br",null),t.destination),r.a.createElement("h4",null,r.a.createElement("strong",null,"Vacation Start:")," ",r.a.createElement("br",null),new Date(t.startingDate).toLocaleDateString()),r.a.createElement("h4",null,r.a.createElement("strong",null,"Vacation End:")," ",r.a.createElement("br",null),new Date(t.endingDate).toLocaleDateString()),r.a.createElement("h4",null,r.a.createElement("strong",null,"Vacation Price:")," ",r.a.createElement("br",null),t.price,"$"),r.a.createElement("span",null,r.a.createElement("strong",null,"Vacation Followers: ")," ",r.a.createElement("br",null)),r.a.createElement("span",null,r.a.createElement("strong",null,t.following)),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("strong",null," Follow Vacation:")," ",r.a.createElement("br",null)),r.a.createElement(C.a,{checked:e.state.follow,onChange:function(a){!0===a.target.checked?e.newFollow(t.vacationId):e.disLike(t.vacationId)}}))})))}}]),a}(n.Component),U=a(33),L=(a(205),function e(t,a,n,r,i,c,s,l){Object(o.a)(this,e),this.vacationId=t,this.description=a,this.destination=n,this.startingDate=r,this.endingDate=i,this.imageName=c,this.price=s,this.following=l}),M=a(323),P=a(331),B=a(324),T=a(325),G=a(326),z=a(327),R=a(328),W=a(330),J=a(329),Y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var i,c=this;return Object(o.a)(this,a),(i=t.call(this,e)).unsubscribeStore=void 0,i.socket=A.a.connect("".concat(k.serverUrl)),i.componentDidMount=Object(h.a)(d.a.mark((function e(){var t,a,n,r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(alert("you got in Admin Page \nWelcome Boss"),i.socket.on("we-got-a-change-from-server",(function(e){i.setState({vacations:e})})),!sessionStorage.getItem("isAdmin")){e.next=6;break}sessionStorage.getItem("isAdmin").includes("1")||i.props.history.push("/user-vacations"),e.next=8;break;case 6:return i.props.history.push("/login"),e.abrupt("return");case 8:if(t=sessionStorage.getItem("firstName"),a=t.split('"')[1],i.setState({firstName:a}),i.unsubscribeStore=x.subscribe((function(){var e=x.getState().vacations;i.setState({vacations:e})})),e.prev=12,!(x.getState().vacations.length<=0)){e.next=21;break}return n=f.a.create({baseURL:"".concat(k.serverUrl),headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),e.next=17,n.get("/api/vacations/all");case 17:r=e.sent,c=r.data,o={type:S.GetAllVacations,payload:c},x.dispatch(o);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(12),console.log("Error: "+e.t0.message),i.props.history.push("/login");case 27:case"end":return e.stop()}}),e,null,[[12,23]])}))),i.removeVacation=function(){var e=Object(h.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("Are you sure you want to Delete?")){e.next=7;break}return a=f.a.create({baseURL:"".concat(k.serverUrl),headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),e.next=5,a.delete("/api/vacations/remove/".concat(t));case 5:n=i.state.vacations.findIndex((function(e){return e.vacationId===t})),x.dispatch({type:S.DeleteVacation,payload:n});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Delete Error: "+e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),i.description=function(e){var t=e.target.value,a=Object(v.a)({},i.state.editedVacation);a.description=t,i.setState({editedVacation:a})},i.destination=function(e){var t=e.target.value,a=Object(v.a)({},i.state.editedVacation);a.destination=t,i.setState({editedVacation:a})},i.startingDate=function(e){var t=e.target.value;if(t<i.getDateFormatStart(new Date))alert("Cannot set Old Date ");else{var a=Object(v.a)({},i.state.editedVacation);a.startingDate=t,i.setState({editedVacation:a})}},i.endingDate=function(e){var t=e.target.value;if(t<=i.state.editedVacation.startingDate)alert("Cannot set Older Date then Starting Date or Equal");else{var a=Object(v.a)({},i.state.editedVacation);a.endingDate=t,i.setState({editedVacation:a})}},i.price=function(e){var t=+e.target.value,a=Object(v.a)({},i.state.editedVacation);a.price=t,i.setState({editedVacation:a})},i.editedVacationModal=Object(h.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("file",i.state.setFile),(a=Object(v.a)({},i.state.editedVacation)).vacationId=i.state.idVacEdit,n=f.a.create({baseURL:"".concat(k.serverUrl),headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),e.next=8,n.patch("/api/vacations/update-vacation",a);case 8:return e.next=10,n.patch("/api/vacations/update-image",t);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),i.imageChange=function(e){i.setState({setFile:e.target.files[0]});var t=Object(v.a)({},i.state.editedVacation);t.imageName=e.target.value,i.setState({editedVacation:t})},i.getDateFormatStart=function(e){var t=new Date(e).toString(),a=new Date(e);return"".concat(a.getFullYear(),"-").concat(("0"+(a.getMonth()+1)).slice(-2),"-").concat(t.slice(8,10))},i.getDateFormatEnd=function(e){var t=new Date(e).toString(),a=new Date(e);return"".concat(a.getFullYear(),"-").concat(("0"+(a.getMonth()+1)).slice(-2),"-").concat(t.slice(8,10))},i.AdminModal=function(){var e=Object(n.useState)(!1),t=Object(U.a)(e,2),a=t[0],c=t[1],o=function(){return c(!a)};if(i.state.idVacEdit){var s=i.state.vacations.find((function(e){return e.vacationId===i.state.idVacEdit}));return r.a.createElement("div",null,r.a.createElement(M.a,{color:"link",onMouseUp:o},"\u270e"),r.a.createElement(P.a,{isOpen:a,toggle:o},r.a.createElement(B.a,{toggle:o},"Editing Vacation"),r.a.createElement(T.a,null,r.a.createElement(G.a,{xs:"2",className:"editVacation"},r.a.createElement(z.a,null,r.a.createElement("label",null,"Vacation Place: "))," ",r.a.createElement(z.a,null,r.a.createElement("input",{type:"text",onChange:i.destination,value:i.state.editedVacation.destination||s.destination})),r.a.createElement(z.a,null,r.a.createElement("label",null,"Vacation Price: "))," ",r.a.createElement(z.a,null,r.a.createElement("input",{type:"number",onChange:i.price,value:i.state.editedVacation.price||s.price})),r.a.createElement(z.a,null,r.a.createElement("label",null,"Vacation Start: Current:"))," ",r.a.createElement(z.a,null,r.a.createElement("input",{type:"date",onChange:i.startingDate,value:i.state.editedVacation.startingDate||i.getDateFormatStart(s.startingDate)})),r.a.createElement(z.a,null,r.a.createElement("label",null,"Vacation End: "))," ",r.a.createElement(z.a,null,r.a.createElement("input",{type:"date",onChange:i.endingDate,value:i.state.editedVacation.endingDate||i.getDateFormatEnd(s.endingDate)})),r.a.createElement(z.a,null,r.a.createElement("label",null,"Vacation Image: "))," ",r.a.createElement(z.a,null,r.a.createElement("input",{type:"file",accept:".jpg",onChange:i.imageChange})),r.a.createElement(z.a,null,r.a.createElement("label",null,"Description: "))," ",r.a.createElement(z.a,null,r.a.createElement("textarea",{maxLength:1e3,onChange:i.description,value:i.state.editedVacation.description||s.description})))),r.a.createElement(R.a,null,r.a.createElement(M.a,{color:"primary",onClick:i.editedVacationModal,onMouseUp:o},"Save")," ",r.a.createElement(M.a,{color:"secondary",onClick:o},"Close"))))}return r.a.createElement("div",null,r.a.createElement(M.a,{color:"link",onMouseUp:o},"\u270e"))},i.clearSession=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.clear(),i.socket.disconnect();case 2:case"end":return e.stop()}}),e)}))),i.TooltipItem=function(e){var t=e.item,a=e.id,i=Object(n.useState)(!1),c=Object(U.a)(i,2),o=c[0],s=c[1];return r.a.createElement("span",null,r.a.createElement(M.a,{className:"mr-1 new",color:"primary",id:"Tooltip-"+a},t.text),r.a.createElement(W.a,{placement:t.placement,isOpen:o,target:"Tooltip-"+a,toggle:function(){return s(!o)}},"Click To Add new Vacation"))},i.TooltipExampleMulti=function(e){return r.a.createElement(r.a.Fragment,null,[{placement:"bottom",text:"+"}].map((function(e,t){return r.a.createElement(c.TooltipItem,{key:t,item:e,id:t})})))},i.TooltipGraph=function(e){var t=e.item,a=Object(n.useState)(!1),i=Object(U.a)(a,2),c=i[0],o=i[1];return r.a.createElement("span",null,r.a.createElement(M.a,{className:"mr-1",color:"link",id:"Tooltip-Graph"},t.text),r.a.createElement(W.a,{placement:t.placement,isOpen:c,target:"Tooltip-Graph",toggle:function(){return o(!c)}},"Graph: Click to Check Vacation Following Status"))},i.TooltipGraphMulti=function(e){return r.a.createElement(r.a.Fragment,null,[{placement:"bottom",text:r.a.createElement("img",{src:"/images/gif/graph-button.gif",alt:"graph"})}].map((function(e,t){return r.a.createElement(c.TooltipGraph,{key:t,item:e,id:t})})))},i.state={vacations:x.getState().vacations,editedVacation:new L,firstName:"",setFile:"",idVacEdit:null},i}return Object(s.a)(a,[{key:"setVacation",value:function(e){this.setState({idVacEdit:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"adminPage"},r.a.createElement("h1",null,"Admin Editor Page"),r.a.createElement("div",{className:"user"},r.a.createElement("h4",null,"Welcome: ",this.state.firstName),r.a.createElement(m.b,{to:"/login",onClick:this.clearSession},"Logout")),r.a.createElement("div",{className:"newVacationBtn"},r.a.createElement(m.b,{to:"/new-vacation"},r.a.createElement(this.TooltipExampleMulti,null))),r.a.createElement("div",{className:"graph"},r.a.createElement(m.b,{to:"/graph"},r.a.createElement(this.TooltipGraphMulti,null))),this.state.vacations.map((function(t){return r.a.createElement("div",{className:"vacations",key:t.vacationId},r.a.createElement(J.a,{className:"themed-container",fluid:!0},r.a.createElement(G.a,{xs:"4"},r.a.createElement("div",{onClick:function(){e.setVacation(t.vacationId)},title:"Click to Edit"},r.a.createElement(e.AdminModal,null)),r.a.createElement(z.a,null),r.a.createElement(z.a,null),r.a.createElement(M.a,{color:"link",onClick:function(){return e.removeVacation(t.vacationId)},className:"changeButtonsX",title:"Click to Delete"},"\ud83d\uddd9"))),r.a.createElement("img",{src:"/images/"+t.imageName,alt:"img"}),r.a.createElement("hr",null),r.a.createElement("h4",null," ",r.a.createElement("strong",null,"Description:"),"  ",r.a.createElement("br",null),r.a.createElement("div",{className:"description"},t.description)),r.a.createElement("h4",null,r.a.createElement("strong",null,"Vacation Place:")," ",r.a.createElement("br",null),t.destination),r.a.createElement("h4",null,r.a.createElement("strong",null,"Vacation Start:")," ",r.a.createElement("br",null),new Date(t.startingDate).toLocaleDateString()),r.a.createElement("h4",null,r.a.createElement("strong",null,"Vacation End:")," ",r.a.createElement("br",null),new Date(t.endingDate).toLocaleDateString()),r.a.createElement("h4",null,r.a.createElement("strong",null,"Vacation Price:")," ",r.a.createElement("br",null),t.price,"$"))})))}}]),a}(n.Component),$=(a(227),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"redirect",value:function(){var e=this;setTimeout((function(){e.props.history.push("/login")}),3e3)}},{key:"render",value:function(){return r.a.createElement("div",{className:"pageNotFound"},r.a.createElement("h1",null,"Wrong Path You Are Moving Back"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h3",null,"404"),this.redirect())}}]),a}(n.Component)),H=(a(228),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).cookie=new w.a,n.description=function(e){var t=e.target.value,a=Object(v.a)({},n.state.newVacation);a.description=t,n.setState({newVacation:a})},n.destination=function(e){var t=e.target.value,a=Object(v.a)({},n.state.newVacation);a.destination=t,n.setState({newVacation:a})},n.getDateFormat=function(e){var t=new Date(e).toString(),a=new Date(e);return"".concat(a.getFullYear(),"-").concat(("0"+(a.getMonth()+1)).slice(-2),"-").concat(t.slice(8,10))},n.startingDate=function(e){var t=e.target.value;if(t<n.getDateFormat(new Date))alert("Cannot set Old Date ");else{var a=Object(v.a)({},n.state.newVacation);a.startingDate=t,n.setState({newVacation:a})}},n.endingDate=function(e){var t=e.target.value;if(t<=n.state.newVacation.startingDate)alert("Cannot set Older Date then Starting Date or Equal");else if(void 0===n.state.newVacation.startingDate)alert("There is no starting date \nCannot set Ending Date before Starting Date");else{var a=Object(v.a)({},n.state.newVacation);a.endingDate=t,n.setState({newVacation:a})}},n.price=function(e){var t=+e.target.value,a=Object(v.a)({},n.state.newVacation);a.price=t,n.setState({newVacation:a})},n.imageChange=function(e){n.setState({setFile:e.target.files[0]});var t=Object(v.a)({},n.state.newVacation);t.imageName=e.target.value,n.setState({newVacation:t})},n.newVacation=Object(h.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=new FormData,void 0!==n.state.newVacation.destination){e.next=5;break}return alert("missing Destination"),e.abrupt("return");case 5:if(void 0!==n.state.newVacation.price){e.next=8;break}return alert("missing Price"),e.abrupt("return");case 8:if(void 0!==n.state.newVacation.startingDate){e.next=11;break}return alert("missing Starting Date"),e.abrupt("return");case 11:if(void 0!==n.state.newVacation.endingDate){e.next=14;break}return alert("missing Ending Date"),e.abrupt("return");case 14:if(void 0!==n.state.newVacation.imageName){e.next=17;break}return alert("missing Image"),e.abrupt("return");case 17:if(void 0!==n.state.newVacation.description){e.next=20;break}return alert("missing Description"),e.abrupt("return");case 20:return t.append("file",n.state.setFile),a=f.a.create({baseURL:"".concat(k.serverUrl),headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),n.props.history.push("admin"),e.next=25,a.post("/api/vacations/new-vacation",n.state.newVacation);case 25:return e.next=27,a.post("/api/vacations/new-image",t);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),console.log(e.t0.message);case 32:case"end":return e.stop()}}),e,null,[[0,29]])}))),n.state={newVacation:new L,setFile:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){sessionStorage.getItem("isAdmin")?sessionStorage.getItem("isAdmin").includes("1")||this.props.history.push("/user-vacations"):this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement("div",{className:"newVacation"},r.a.createElement(J.a,null,r.a.createElement("br",null),r.a.createElement("h2",null,"Create New Vacation"),r.a.createElement("br",null),r.a.createElement(G.a,{md:"2",xs:"2",lg:"1"},r.a.createElement(z.a,null,r.a.createElement("input",{type:"text",placeholder:" Vacation Place: Where is it?",onChange:this.destination})),r.a.createElement(z.a,null,r.a.createElement("input",{type:"number",placeholder:" Price: How much it cost? in $",onChange:this.price})),r.a.createElement(z.a,null,r.a.createElement("label",null,"Vacation Start: ")),r.a.createElement(z.a,null,r.a.createElement("input",{type:"date",onChange:this.startingDate})),r.a.createElement(z.a,null,r.a.createElement("label",null,"Vacation End: ")),r.a.createElement(z.a,null,r.a.createElement("input",{type:"date",onChange:this.endingDate})),r.a.createElement(z.a,null,r.a.createElement("label",null,"Vacation Image: ")),r.a.createElement(z.a,null,r.a.createElement("input",{type:"file",onChange:this.imageChange,accept:".jpg"})),r.a.createElement(z.a,null,r.a.createElement("label",null,"Description: ")),r.a.createElement(z.a,null,r.a.createElement("textarea",{onChange:this.description,placeholder:" Keep it simple max Length 1500 keys"})),r.a.createElement(z.a,null,r.a.createElement(M.a,{color:"primary",onClick:this.newVacation},"Submit new Vacation")),r.a.createElement(z.a,null,r.a.createElement("div",{className:"back"},r.a.createElement(m.b,{color:"black",to:"/admin"},"Go Back"))),r.a.createElement(z.a,null,r.a.createElement("br",null)))))}}]),a}(n.Component)),q=a(136),_=a(137),K=function(){var e=Object(n.useState)({}),t=Object(U.a)(e,2),a=t[0],i=t[1],c=function(){var e=Object(h.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=[],n=f.a.create({baseURL:"".concat(k.serverUrl),headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),e.next=5,n.get("/api/vacations/all").then((function(e){var n,r=Object(q.a)(e.data);try{for(r.s();!(n=r.n()).done;){var c=n.value;t.push(parseInt(c.following.toString())),a.push(c.destination)}}catch(o){r.e(o)}finally{r.f()}i({labels:a,datasets:[{label:"Following",data:t,backgroundColor:["snow","magenta","green","black","white","orange","brown","gray","red","blue"],borderWidth:1}]})})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){c()}),[]),r.a.createElement(J.a,null,r.a.createElement("br",null),r.a.createElement("h2",null,"Vacations Following Graph"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(_.a,{data:a,options:{responsive:!0,scales:{yAxes:[{ticks:{fontSize:20,autoSkip:!0,maxTicksLimit:3,fontColor:"black",fontStyle:"bold",beginAtZero:!0},gridLines:{color:"orange",display:!0}}],xAxes:[{ticks:{fontColor:"black",fontSize:15},gridLines:{color:"black",display:!1}}]}}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(m.b,{to:"/admin"}," ",r.a.createElement(M.a,{color:"primary"},"Back to Edit")))},X=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"layout"},r.a.createElement(m.a,null,r.a.createElement("h1",null,"Traveler"),r.a.createElement("hr",null),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/login",component:V,exact:!0}),r.a.createElement(p.a,{path:"/register",component:y,exact:!0}),r.a.createElement(p.a,{path:"/user-vacations",component:F,exact:!0}),r.a.createElement(p.a,{path:"/admin",component:Y,exact:!0}),r.a.createElement(p.a,{path:"/new-vacation",component:H,exact:!0}),r.a.createElement(p.a,{path:"/graph",component:K,exact:!0}),r.a.createElement(p.a,{path:"/",component:V,exact:!0}),r.a.createElement(p.a,{path:"*",component:$}))))}}]),a}(n.Component);a(320);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[139,1,2]]]);
//# sourceMappingURL=main.4db10157.chunk.js.map